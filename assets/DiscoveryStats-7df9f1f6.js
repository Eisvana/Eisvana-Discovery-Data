import{d as C,c as r,o as P,a as S,b as O,_ as G,F as H,r as q,t as o,n as M,u as I,s as F,e as z,O as R,f as A,A as X,P as J,g as N,h as t,i as B,j as p,k as U,p as K,l as Q,m as W,q as Y}from"./index-cc726aa1.js";const V=C({__name:"DataTable",props:{headers:{},sorting:{},data:{}},setup(e){const a=e,t=r((()=>(a.headers.normal??[]).concat(a.headers.sortable??[]).length));return(e,a)=>(P(),S("div",{class:"stat-grid",style:M({"grid-template-columns":`repeat(${t.value}, auto)`})},[O(G,{headers:e.headers,sorting:e.sorting},null,8,["headers","sorting"]),(P(!0),S(H,null,q(e.data,(e=>(P(),S("div",null,o(e),1)))),256))],4))}}),Z={key:0,open:""},ee=t("summary",null,"Discoverer Stats",-1),te=C({__name:"DiscovererStats",setup(e){const a=I(),{filteredData:t,dataLength:l,amountTagged:s,itemsPerPage:o,currentPageIndex:n}=F(a),u=z({col:2,order:R.desc}),v=r((()=>{var e;const a={};for(const r of t.value){if(!r.Discoverer)continue;const t=a[e=r.Discoverer]??(a[e]={platform:"",discoveries:0,discPercent:"0%",tagged:0,taggedPercent:"0%",taggedPercentSelf:"0%"});t.discoveries++,r["Correctly Tagged"]&&t.tagged++,t.platform=B[r.Platform],t.discPercent=p(t.discoveries,l.value)+"%",t.taggedPercent=p(t.tagged,s.value)+"%",t.taggedPercentSelf=p(t.tagged,t.discoveries)+"%"}const r=[];for(const[e,t]of Object.entries(a))r.push([e,...Object.values(t)]);return r})),d=r((()=>U(v.value,u))),i=r((()=>{const e=K(d.value,o.value.discovererStats);return e.length<n.value.discovererStats&&(n.value.discovererStats=0),e})),c=r((()=>{var e;return(null==(e=i.value[n.value.discovererStats])?void 0:e.flat())??[]})),g={normal:["Pos."],sortable:["Name","Platform","Discoveries","Discoveries %","Tagged","Tagged %\nof total","Tag Rate"]};return(e,a)=>c.value.length?(P(),S("details",Z,[ee,O(J,{"total-pages":i.value.length,section:A(X).discovererStats},null,8,["total-pages","section"]),O(V,{headers:g,sorting:u,data:c.value},null,8,["sorting","data"])])):N("",!0)}}),ae={key:0,open:""},se=t("summary",null,"Platform Stats",-1),re=C({__name:"PlatformStats",setup(e){const a=I(),{filteredData:t,dataLength:l,amountTagged:s}=F(a),o=z({col:2,order:R.desc}),n=r((()=>{const e={Steam:new Set,PlayStation:new Set,Xbox:new Set,GOG:new Set,"Nintendo Switch":new Set},a={};for(const r of t.value){if(!r.Platform)continue;const t=B[r.Platform],o=a[t]??(a[t]={players:0,discoveries:0,discPercent:"0%",tagged:0,taggedPercent:"0%",taggedPercentSelf:"0%"});o.discoveries++,r["Correctly Tagged"]&&o.tagged++,e[t].add(r.Discoverer),o.players=e[t].size,o.discPercent=p(o.discoveries,l.value)+"%",o.taggedPercent=p(o.tagged,s.value)+"%",o.taggedPercentSelf=p(o.tagged,o.discoveries)+"%"}const r=[];for(const[e,t]of Object.entries(a))r.push([e,...Object.values(t)]);return r})),u=r((()=>U(n.value,o).flat())),v={normal:["Pos."],sortable:["Platform","Players","Discoveries","Discoveries %","Tagged","Tagged %\nof total","Tag Rate"]};return(e,a)=>u.value.length?(P(),S("details",ae,[se,O(V,{headers:v,sorting:o,data:u.value},null,8,["sorting","data"])])):N("",!0)}}),u=e=>(Q("data-v-fecbbd13"),e=e(),W(),e),oe={open:""},ne=u((()=>t("summary",null,"Number Stats",-1))),ce={class:"number-stats-wrapper"},le=u((()=>t("div",null,"Tagged:",-1))),de=u((()=>t("div",null,"Not/incorrectly tagged:",-1))),ie=u((()=>t("div",null,"Procedural name:",-1))),ue={key:0},ve={key:1},ge=u((()=>t("div",null,"Number of discoverers:",-1))),_e=u((()=>t("div",null,"Average discoveries per day:",-1))),me=u((()=>t("div",null,"Average number of players per day:",-1))),fe=u((()=>t("div",null,"Average number of Hub tags per day:",-1))),pe=u((()=>t("div",null,"Average non-Hub tagged systems per day:",-1))),he=u((()=>t("div",null,"Earliest Discovery:",-1))),ye=u((()=>t("div",null,"Latest Discovery:",-1))),De=C({__name:"NumberStats",setup(e){const a=I(),{filteredData:l,amountTagged:s,dataLength:n,dateRange:u}=F(a),v=r((()=>p(s.value,n.value))),d=r((()=>l.value.filter((e=>!e["Correctly Tagged"]&&e.Name)).length)),i=r((()=>p(d.value,n.value))),c=r((()=>l.value.filter((e=>!e.Name&&e.Discoverer)).length)),g=r((()=>p(c.value,n.value))),m=r((()=>l.value.filter((e=>!e.Name&&!e.Discoverer)).length)),f=r((()=>p(m.value,n.value))),D=r((()=>new Set(l.value.filter((e=>e.Discoverer)).map((e=>e.Discoverer))).size)),y=r((()=>{if(u.value.some((e=>!e)))return 0;const[e,a]=u.value;return(new Date(a).getTime()-new Date(e).getTime())/864e5+1})),h=r((()=>y.value?(n.value/y.value).toFixed(2):0)),b=r((()=>{const e={};for(const a of l.value.filter((e=>e.Discoverer))){const t=a.Timestamp;e[t]??(e[t]=new Set),e[t].add(a.Discoverer)}const a=Object.values(e).map((e=>e.size)).reduce(((e,a)=>e+a),0);return y.value?(a/y.value).toFixed(2):0})),T=r((()=>y.value?(s.value/y.value).toFixed(2):0)),O=r((()=>y.value?((d.value+c.value)/y.value).toFixed(2):0));r((()=>{var e;const a={};for(const t of l.value)t.Name&&(a[e=t.Name]??(a[e]=0),a[t.Name]++);return Object.entries(a).filter((e=>e[1]>1))}));const _=e=>e?new Date(e).toLocaleDateString():"-";return(e,a)=>(P(),S("details",oe,[ne,t("div",ce,[le,t("div",null,o(A(s))+" ("+o(v.value)+"%)",1),de,t("div",null,o(d.value)+" ("+o(i.value)+"%)",1),ie,t("div",null,o(c.value)+" ("+o(g.value)+"%)",1),m.value?(P(),S("div",ue,"Undiscovered:")):N("",!0),m.value?(P(),S("div",ve,o(m.value)+" ("+o(f.value)+"%)",1)):N("",!0),ge,t("div",null,o(D.value),1),_e,t("div",null,o(h.value),1),me,t("div",null,o(b.value),1),fe,t("div",null,o(T.value),1),pe,t("div",null,o(O.value),1),he,t("div",null,o(_(A(u)[0])),1),ye,t("div",null,o(_(A(u)[1])),1),N("",!0),N("",!0),N("",!0)])]))}}),Pe=Y(De,[["__scopeId","data-v-fecbbd13"]]),Se={key:0,class:"stats-wrapper"},Te=C({__name:"DiscoveryStats",setup(e){const a=I(),{filteredData:t}=F(a);return(e,a)=>A(t).length?(P(),S("div",Se,[O(Pe),O(te),O(re)])):N("",!0)}});export{Te as default};
