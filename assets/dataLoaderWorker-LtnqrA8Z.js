const x=e=>!!e&&"object"==typeof e;function N(e){return!!x(e)&&("Name"in e&&"Glyphs"in e&&"Discoverer"in e&&"Platform"in e&&"Timestamp"in e)}const M={A21117FF:"Flinus",A11117FF:"Imnito",A11127FF:"Hiuccli",A21127FF:"Insesu",A21107FF:"Cuynteto",A21107FE:"Uskabar",A21117FE:"Ziwananau"},v=864e5;async function P({categories:e,filterConfig:s}){try{const n=Object.assign({"../assets/Animal/index.json":()=>import("./index-B6DcpstV.js").then((e=>e.default)),"../assets/Base/index.json":()=>import("./index-BWqXAykg.js").then((e=>e.default)),"../assets/Flora/index.json":()=>import("./index-5_coN-m6.js").then((e=>e.default)),"../assets/Mineral/index.json":()=>import("./index-DrrZo0jS.js").then((e=>e.default)),"../assets/Planet/index.json":()=>import("./index-wkTWkUXa.js").then((e=>e.default)),"../assets/Settlement/index.json":()=>import("./index-C9SzS9Ti.js").then((e=>e.default)),"../assets/SolarSystem/index.json":()=>import("./index-DVHqq52o.js").then((e=>e.default))}),t=e.flatMap((e=>Object.entries(n).filter((s=>s[0].endsWith(`${e}/index.json`))).map((e=>e[1])))),i=t.length,a={status:"initialised",data:Array.from({length:i},(()=>[]))};postMessage(a);const r=t.map(((e,n)=>C(e,n,s)));await Promise.all(r)}catch(e){console.warn(e),V(e)}}async function C(e,s,n){try{const t=await e();if(!Array.isArray(t))return;const i={status:"running",data:R(t.filter((e=>N(e))),n),index:s};postMessage(i)}catch(e){V(e)}}function R(e,{regions:s,unixTimestamp:n,tagged:t,procName:i,intersections:a,searchTerms:r,caseSensitivity:o,platforms:c}){const{startDate:l=0,endDate:d=0}=n,m=s.map((e=>b(e))),u=o.name?r.name:r.name.toLowerCase(),p=o.discoverer?r.discoverer:r.discoverer.toLowerCase(),f=a.name,h=a.glyphs,y=a.discoverer,g=r.glyphs.slice(1).toUpperCase();return e.filter((function(e){const s=o.name?e.Name:e.Name.toLowerCase(),n=o.discoverer?e.Discoverer:e.Discoverer.toLowerCase(),a=e.Glyphs.slice(1);return!!((!l&&!d||l<e.Timestamp&&e.Timestamp<d+v||l<e.Timestamp&&!d||!l&&e.Timestamp<d+v)&&(!c.length&&!e.Platform||c.includes(e.Platform))&&(""===t||t&&e["Correctly Prefixed"]||!t&&!1===e["Correctly Prefixed"])&&(""===i||i&&!e.Name||!i&&e.Name)&&(!u||"includes"===f&&s.includes(u)||"is"===f&&s===u||"!includes"===f&&!s.includes(u)||"!is"===f&&s!==u)&&(!g||"includes"===h&&a.includes(g)||"is"===h&&a===g||"!includes"===h&&!a.includes(g)||"!is"===h&&a!==g)&&(!p||"includes"===y&&n.includes(p)||"is"===y&&n===p||"!includes"===y&&!n.includes(p)||"!is"===y&&n!==p))&&(!m.length&&!e.Glyphs||m.some((s=>e.Glyphs.slice(4)===s.regionGlyphs)))}))}function b(e){var s;return{regionGlyphs:(null==(s=Object.entries(M).find((s=>s[1]===e)))?void 0:s[0])??""}}function V(e){const s={status:"error",data:e instanceof Error?e:new Error("string"==typeof e?e:"something went wrong")};postMessage(s)}onmessage=async({data:e})=>{try{await P(e),postMessage({status:"finished"})}catch(e){console.warn("something happened in worker:",e),V(e)}finally{close()}};
